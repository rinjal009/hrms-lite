<!DOCTYPE html>
<html>
<head>
  <title>HRMS Lite</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-4">
<div class="container">
  <h2 class="mb-4">HRMS Lite</h2>

  <!-- Add Employee -->
  <div class="card p-3 mb-4">
    <h4>Add Employee</h4>
    <input id="emp_id" class="form-control mb-2" placeholder="Employee ID">
    <input id="name" class="form-control mb-2" placeholder="Full Name">
    <input id="email" class="form-control mb-2" placeholder="Email">
    <input id="dept" class="form-control mb-2" placeholder="Department">
    <button class="btn btn-primary" onclick="addEmployee()">Add</button>
  </div>

  <!-- Employee List -->
  <div class="card p-3 mb-4">
    <h4>Employees</h4>
    <button class="btn btn-secondary mb-2" onclick="loadEmployees()">Refresh</button>
    <table class="table" id="empTable"></table>
  </div>

  <!-- Attendance -->
  <div class="card p-3">
    <h4>Mark Attendance</h4>
    <input id="att_emp" class="form-control mb-2" placeholder="Employee ID">
    <select id="status" class="form-control mb-2">
      <option>Present</option>
      <option>Absent</option>
    </select>
    <button class="btn btn-success" onclick="markAttendance()">Mark</button>
  </div>

</div>

<script>
const API = "http://127.0.0.1:8000";

async function addEmployee() {
  const data = {
    employee_id: emp_id.value,
    full_name: name.value,
    email: email.value,
    department: dept.value
  };

  const res = await fetch(API + "/employees", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(data)
  });

  alert(await res.text());
}

async function loadEmployees() {
  const res = await fetch(API + "/employees");
  const list = await res.json();

  empTable.innerHTML =
    "<tr><th>ID</th><th>Name</th><th>Email</th><th>Dept</th></tr>" +
    list.map(e =>
      `<tr>
        <td>${e.employee_id}</td>
        <td>${e.full_name}</td>
        <td>${e.email}</td>
        <td>${e.department}</td>
      </tr>`
    ).join("");
}

async function markAttendance() {
  const data = {
    employee_id: att_emp.value,
    status: status.value
  };

  const res = await fetch(API + "/attendance", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(data)
  });

  alert(await res.text());
}
</script>

</body>
</html>
